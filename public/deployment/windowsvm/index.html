<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.72.0" />
    <meta name="description" content="DetectionLab Documentation">
<meta name="author" content="clong">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Windows: Virtualbox &amp; VMware :: DetectionLab</title>

    
    <link href="/css/nucleus.css?1609102130" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1609102130" rel="stylesheet">
    <link href="/css/hybrid.css?1609102130" rel="stylesheet">
    <link href="/css/featherlight.min.css?1609102130" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1609102130" rel="stylesheet">
    <link href="/css/auto-complete.css?1609102130" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1609102130" rel="stylesheet">
    <link href="/css/theme.css?1609102130" rel="stylesheet">
    <link href="/css/hugo-theme.css?1609102130" rel="stylesheet">
    
    <link href="/css/theme-clong.css?1609102130" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1609102130"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/deployment/windowsvm/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://detectionlab.network">
  <a href="https://github.com/clong/DetectionLab"><img src="https://github.com/clong/DetectionLab/raw/master/img/DetectionLab.png"></a>

  <a href="https://github.com/clong/DetectionLab/commit/master"><img src="https://camo.githubusercontent.com/a167737b7cdcc29db5d8147ae5d026ee1e795f02/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6173742d636f6d6d69742f636c6f6e672f446574656374696f6e4c61622e7376673f7374796c653d666c61742d737175617265"></a>
  <div style="height:34px">
    <iframe src="https://github.com/sponsors/clong/button" title="Sponsor clong" height="35" width="116" style="border: 0;"></iframe>
  </div>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1609102130"></script>
<script type="text/javascript" src="/js/auto-complete.js?1609102130"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/detectionlab.network";
    
</script>
<script type="text/javascript" src="/js/search.js?1609102130"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/introduction/" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="/introduction/">
          <i class='fas fa-asterisk'></i> Introduction
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/introduction/infoandcreds/" title="Lab Information and Credentials" class="dd-item ">
        <a href="/introduction/infoandcreds/">
        Lab Information and Credentials
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/introduction/prerequisites/" title="Prerequisites" class="dd-item ">
        <a href="/introduction/prerequisites/">
        Prerequisites
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/introduction/packerandvagrant/" title="Understanding Packer &amp; Vagrant" class="dd-item ">
        <a href="/introduction/packerandvagrant/">
        Understanding Packer &amp; Vagrant
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/introduction/basicvagrant/" title="Basic Vagrant Usage" class="dd-item ">
        <a href="/introduction/basicvagrant/">
        Basic Vagrant Usage
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/introduction/continuousintegration/" title="Continuous Integration" class="dd-item ">
        <a href="/introduction/continuousintegration/">
        Continuous Integration
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/deployment/" title="Deployment" class="dd-item 
        parent
        
        
        ">
      <a href="/deployment/">
          <i class='fas fa-hammer'></i> Deployment
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/deployment/macosvm/" title="MacOS: Virtualbox &amp; VMware" class="dd-item ">
        <a href="/deployment/macosvm/">
        MacOS: Virtualbox &amp; VMware
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployment/windowsvm/" title="Windows: Virtualbox &amp; VMware" class="dd-item active">
        <a href="/deployment/windowsvm/">
        Windows: Virtualbox &amp; VMware
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployment/linuxvm/" title="Linux: Virtualbox &amp; VMware" class="dd-item ">
        <a href="/deployment/linuxvm/">
        Linux: Virtualbox &amp; VMware
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployment/aws/" title="AWS" class="dd-item ">
        <a href="/deployment/aws/">
        AWS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployment/azure/" title="Azure" class="dd-item ">
        <a href="/deployment/azure/">
        Azure
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployment/esxi/" title="ESXi" class="dd-item ">
        <a href="/deployment/esxi/">
        ESXi
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployment/hyperv/" title="HyperV" class="dd-item ">
        <a href="/deployment/hyperv/">
        HyperV
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployment/libvirt/" title="LibVirt" class="dd-item ">
        <a href="/deployment/libvirt/">
        LibVirt
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/deployment/troubleshooting/" title="Troubleshooting &amp; Known Issues" class="dd-item ">
        <a href="/deployment/troubleshooting/">
        Troubleshooting &amp; Known Issues
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/usage/" title="Usage" class="dd-item 
        
        
        
        ">
      <a href="/usage/">
          <i class='fas fa-server'></i> Usage
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/usage/atomicredteam/" title="" class="dd-item ">
        <a href="/usage/atomicredteam/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/usage/autorunstowineventlog/" title="" class="dd-item ">
        <a href="/usage/autorunstowineventlog/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/usage/badblood/" title="" class="dd-item ">
        <a href="/usage/badblood/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/usage/mimikatz/" title="" class="dd-item ">
        <a href="/usage/mimikatz/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/usage/splunk/" title="" class="dd-item ">
        <a href="/usage/splunk/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/usage/sysmon/" title="" class="dd-item ">
        <a href="/usage/sysmon/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/usage/velociraptor/" title="" class="dd-item ">
        <a href="/usage/velociraptor/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/usage/zeek/" title="" class="dd-item ">
        <a href="/usage/zeek/">
        
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/customization/" title="Customization" class="dd-item 
        
        
        
        ">
      <a href="/customization/">
          <i class='fas fa-cogs'></i> Customization
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/customization/buildami/" title="AWS: Building your own AMIs" class="dd-item ">
        <a href="/customization/buildami/">
        AWS: Building your own AMIs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/customization/buildpackerboxes/" title="Building Your Own Packer Boxes" class="dd-item ">
        <a href="/customization/buildpackerboxes/">
        Building Your Own Packer Boxes
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/customization/differentawsregion/" title="Deploying DetectionLab in a Different AWS Region" class="dd-item ">
        <a href="/customization/differentawsregion/">
        Deploying DetectionLab in a Different AWS Region
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/customization/bots/" title="Installing the Boss of the SOC (BOTS) Datasets" class="dd-item ">
        <a href="/customization/bots/">
        Installing the Boss of the SOC (BOTS) Datasets
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/customization/badblood/" title="Use BadBlood to Add Random Users and Groups to Active Directory" class="dd-item ">
        <a href="/customization/badblood/">
        Use BadBlood to Add Random Users and Groups to Active Directory
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://twitter.com/intent/follow?screen_name=detectionlab"><br/><img src='https://img.shields.io/twitter/follow/DetectionLab.svg?style=social' alt='follow on Twitter'></a>
              </li>
          
              <li> 
                  <a class="padding" href="https://github.com/clong/detectionlab"><i class='fab fa-github'></i> DetectionLab</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>DetectionLab</a> > <a href='/deployment/'>Deployment</a> > Windows: Virtualbox & VMware
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#supported-provisioners">Supported Provisioners</a></li>
        <li><a href="#instructions">Instructions</a></li>
        <li><a href="#troubleshooting">Troubleshooting</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Windows: Virtualbox &amp; VMware
            </h1>
          

        


<h3 id="supported-provisioners">Supported Provisioners</h3>
<ul>
<li>Virualbox</li>
<li>A licensed copy of VMware Workstation
<ul>
<li>The <a href="https://www.vagrantup.com/vmware/#buy-now">VMWare Desktop Vagrant plugin</a> is $79 and is required to use Vagrant with VMware.</li>
<li>Install it with <code>vagrant plugin install vagrant-vmware-desktop</code>.</li>
<li>License it with <code>vagrant plugin license vagrant-vmware-desktop &lt;path_to_.lic&gt;</code>.</li>
<li>Additionally, the <a href="https://www.vagrantup.com/docs/vmware/vagrant-vmware-utility.html">Vagrant VMware Utility</a> must also be installed</li>
</ul>
</li>
</ul>

<div class="notices warning" ><p>If you have both Virtualbox and VMware installed, consider disabling the network adapters for the provider that you are not using. For example, if you want to build DetectionLab using Virtualbox, disable the VMware network adatpers (or vice-versa) to avoid a conflict. <img src="../../images/interfaces.png" alt="interfaces"></p>
</div>

<h3 id="instructions">Instructions</h3>
<ol>
<li>Ensure the prerequisites listed above are installed and that you meet the <a href="http://detectionlab.network/introduction/prerequisites/">system requirements</a></li>
<li>Clone the DetectionLab repo to your filesystem: <code>git clone https://github.com/clong/DetectionLab.git</code></li>
<li>Using a terminal, navigate to the <strong>DetectionLab/Vagrant</strong> repository and run <strong>.\prepare.ps1</strong> to verify that your system has all of the prerequisites installed:</li>
</ol>
<p><img src="../../images/prepare_win.png" alt="vagrantstatus"></p>
<p>At this point in time, we can bring up DetectionLab using the <code>vagrant up --provider=&lt;provider&gt;</code> command. The provider options are <code>virtualbox</code> or <code>vmware_desktop</code>.</p>
<p>When we run Vagrant up, here&rsquo;s what happens:</p>
<ol>
<li>Vagrant will bring up one host at a time, starting with logger and followed by dc, wef, and win10.</li>
<li>Three boxes will be downloaded from Vagrant cloud:
<ul>
<li><a href="https://app.vagrantup.com/bento/boxes/ubuntu-18.04">bento/ubuntu18.04</a></li>
<li><a href="https://app.vagrantup.com/detectionlab/boxes/win2016">detectionlab/win2016</a></li>
<li><a href="https://app.vagrantup.com/detectionlab/boxes/win10">detectionlab/win10</a></li>
</ul>
</li>
<li>Each box will go through provisioning, which configures the host and installs software.</li>
</ol>
<p>After running <code>vagrant up --provider=vmware_desktop</code> or <code>vagrant up --provider=virtualbox</code>, you should see something like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">PS C:\Users\build\DetectionLab\Vagrant&gt; vagrant up --provider=virtualbox
Bringing machine &#39;logger&#39; up with &#39;virtualbox&#39; provider...
Bringing machine &#39;dc&#39; up with &#39;virtualbox&#39; provider...
Bringing machine &#39;wef&#39; up with &#39;virtualbox&#39; provider...
Bringing machine &#39;win10&#39; up with &#39;virtualbox&#39; provider...
==&gt; logger: Importing base box &#39;bento/ubuntu-18.04&#39;...
==&gt; logger: Matching MAC address for NAT networking...
==&gt; logger: Checking if box &#39;bento/ubuntu-18.04&#39; version &#39;202007.17.0&#39; is up to date...
==&gt; logger: Setting the name of the VM: logger
==&gt; logger: Clearing any previously set network interfaces...
==&gt; logger: Preparing network interfaces based on configuration...
    logger: Adapter 1: nat
    logger: Adapter 2: hostonly
==&gt; logger: Forwarding ports...
    logger: 22 (guest) =&gt; 2222 (host) (adapter 1)
==&gt; logger: Running &#39;pre-boot&#39; VM customizations...
==&gt; logger: Booting VM...
==&gt; logger: Waiting for machine to boot. This may take a few minutes...
    logger: SSH address: 127.0.0.1:2222
    logger: SSH username: vagrant
    logger: SSH auth method: private key
    logger:
    logger: Vagrant insecure key detected. Vagrant will automatically replace
    logger: this with a newly generated keypair for better security.
    logger:
    logger: Inserting generated public key within guest...
    logger: Removing insecure key from the guest if it&#39;s present...
    logger: Key inserted! Disconnecting and reconnecting using new SSH key...
==&gt; logger: Machine booted and ready!
==&gt; logger: Checking for guest additions in VM...
==&gt; logger: Setting hostname...
==&gt; logger: Configuring and enabling network interfaces...
==&gt; logger: Mounting shared folders...
    logger: /vagrant =&gt; C:/Users/user/DetectionLab/Vagrant
==&gt; logger: Running provisioner: shell...
    logger: Running: C:/Users/build/AppData/Local/Temp/vagrant-shell20200813-3372-yqjhma.sh
    logger: [05:34:56]: Adding apt repositories...
    logger: Get:1 http://security.ubuntu.com/ubuntu bionic-security InRelease [88.7 kB]
    logger: Hit:2 http://archive.ubuntu.com/ubuntu bionic InRelease
...
...
</code></pre></div><p>If all goes well, this process should continue for 1-2 hours depending on your computer and network speed. The boxes are very large, but only need to be downloaded once.</p>
<p>Once provisoning is finished, you can access the VMs through the GUI or SSH/RDP to them directly. You can also verify services are accessible by running <code>.\post_build_checks.ps1</code>:</p>
<p><img src="../../images/post_build_win.png?width=600" alt="vagrantstatus"></p>
<p>If for some reason you encounter an error or any issues, checkout the troubleshooting page linked below. If you can&rsquo;t find an answer to your question, please <a href="https://github.com/clong/DetectionLab/issues">open an issue</a> on the DetectionLab GitHub!</p>
<h3 id="troubleshooting">Troubleshooting</h3>
<p>Visit the <a href="../troubleshooting/">troubleshooting</a> page.</p>


<footer class="footline">
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/deployment/macosvm/" title="MacOS: Virtualbox &amp; VMware"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/deployment/linuxvm/" title="Linux: Virtualbox &amp; VMware" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1609102130"></script>
    <script src="/js/perfect-scrollbar.min.js?1609102130"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1609102130"></script>
    <script src="/js/jquery.sticky.js?1609102130"></script>
    <script src="/js/featherlight.min.js?1609102130"></script>
    <script src="/js/highlight.pack.js?1609102130"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1609102130"></script>
    <script src="/js/learn.js?1609102130"></script>
    <script src="/js/hugo-learn.js?1609102130"></script>

    <link href="/mermaid/mermaid.css?1609102130" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1609102130"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

